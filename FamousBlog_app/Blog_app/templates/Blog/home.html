<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Лінія під navbar градієнт фіолетово-чорний */
        .navbar-divider {
            height: 15px;
            background: linear-gradient(to right, #4B0082, #000000);
            margin: 0;
        }


        body{

      background-size: cover;      
      background-position: center; 
       background-image: url("data:image/jpeg;base64,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");
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-0">
  <div class="container">
    <a class="navbar-brand" href="/">Blog</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
            data-bs-target="#navbarNav" aria-controls="navbarNav" 
            aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">

      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="/">Головна</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.path|slice:":11" == '/categorys/' %}active{% endif %}" href="/categorys/">Категорії</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.path|slice:":16" == '/advertisements/' %}active{% endif %}" href="/advertisements/">Оголошення</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.path|slice:":9" == '/articles/' %}active{% endif %}" href="/articles/">Статті</a>
        </li>

      </ul>

      <ul class="navbar-nav">
        {% if user.is_authenticated %}
          <li class="nav-item">
            <span class="nav-link text-white me-2">{{ user.username }}</span>
          </li>
          <li class="nav-item">
    <form method="post" action="{% url 'logout' %}" class="d-inline">
        {% csrf_token %}
        <button type="submit" class="nav-link btn btn-outline-light px-3 ms-2">
            Вийти
        </button>
    </form>
</li>
        {% else %}
          <li class="nav-item">
            <a class="nav-link btn btn-outline-light px-3 ms-2" href="{% url 'login' %}">Вхід / Реєстрація</a>
          </li>
        {% endif %}
      </ul>

    </div>
  </div>
</nav>

<!-- Чорно-фіолетова лінія під navbar -->
<div class="navbar-divider"></div>

<div class="container mt-5">
    <h1 style="display: flex; justify-content: center; font-size: 40px; font-family: Impact; padding: 15px; color:rgb(232, 216, 71);">Вітаємо вас</h1>
    <p style="display: flex; justify-content: center; font-size: 25px; font-family: Impact; color: whitesmoke; -webkit-text-stroke: 1px black; text-stroke: 1px black;;">Ласкаво просимо на наш блог!</p>
</div>

<div>
    <h2 style='display: flex;justify-content: center; align-items: center; margin-left: 62px; font-size: 40px; font-family: Impact; padding: 5px; color: whitesmoke; -webkit-text-stroke: 1px rgb(0, 0, 0); text-stroke: 3px rgb(179, 123, 0);'>Коротко про нас :
   <p style=" display: flex; margin-left: 15px; font-size: 25px; font-family:Impact ; color: whitesmoke; -webkit-text-stroke: 1px black; text-stroke: 3px black;"> <br> Ми учні онлайн школи Logika <br>(3 курс) , якщо вам цікаво про що, цей блок,<br> перейдіть на розділ Оголошення </p>
    </h2>
    
</div>

<h2 style="text-align:center; color: white;">Список статей</h2>

{% if articles %}
    {% for article in articles %}
    {% if article.status == "published" %}
        <div style="
            margin: 20px auto;
            width: 70%;
            background: whitesmoke;
            padding: 5px;
            border-radius: 10px;
        ">
            <h3>{{ article.title }}</h3>

            <p>{{ article.content }}</p>

            <small>
                Автор: {{ article.author }} |
                Дата: {{ article.created_at|date:"d.m.Y H:i" }}
            </small>

            <br><br>

            {% if user.is_authenticated %}
                <button 
                    type="button"
                    class="btn btn-sm btn-outline-danger like-btn"
                    data-id="{{ article.id }}"
                >
                    ❤️ <span id="likes-{{ article.id }}">{{ article.total_likes }}</span>
                </button>
            {% else %}
                <span>❤️ {{ article.total_likes }}</span>
            {% endif %}
        </div>
    {% endif %}
{% endfor %}

{% else %}
    <p style="text-align:center; color:white;">
        Статей поки немає
    </p>
{% endif %}




</div>
<script>
document.querySelectorAll('.like-btn').forEach(btn => {
    btn.addEventListener('click', function () {
        const articleId = this.dataset.id;

        fetch(`/articles/like/${articleId}/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(res => res.json())
        .then(data => {
            document.getElementById(`likes-${articleId}`).innerText = data.total_likes;
        });
    });
});
</script>



</body>
</html>





